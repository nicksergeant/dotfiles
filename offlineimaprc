[general]
ui = TTYUI
accounts = NickSergeant
pythonfile=~/.mutt/offlineimap.py
fsync = False

[Account NickSergeant]
localrepository = NickSergeant-Local
remoterepository = NickSergeant-Remote
status_backend = sqlite
postsynchook = /usr/local/bin/notmuch new

[Repository NickSergeant-Local]
type = Maildir
localfolders = ~/.mail/nick-nicksergeant.com
nametrans = lambda folder: {'drafts':  'INBOX.Drafts',
                            'sent':    'INBOX.Sent',
                            'business':'INBOX.Business Receipts',
                            'archive': 'INBOX.Archive',
                           }.get(folder, folder)
folderfilter = lambda folder: folder not in ['INBOX.Trash', 'INBOX.Junk Mail']

[Repository NickSergeant-Remote]
maxconnections = 2
type = IMAP
remotehost = mail.messagingengine.com
remoteuser = nicksergeant@fastmail.com
remotepasseval = get_keychain_pass(account="nicksergeant@fastmail.com", server="www.fastmail-offlineimap.com")
cert_fingerprint = bddc89dae48629898af13421d7844f806ca33943
ssl = yes
expunge = no
nametrans = lambda folder: {'INBOX.Drafts':            'drafts',
                            'INBOX.Sent':              'sent',
                            'INBOX.Business Receipts': 'business',
                            'INBOX.Archive':           'archive',
                           }.get(folder, folder)
folderfilter = lambda folder: folder not in ['INBOX.Trash', 'INBOX.Junk Mail']
