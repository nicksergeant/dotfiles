#!/bin/bash

file=$1
extension="${file##*.}"

uuid=$(uuidgen)
uuid_lower="${uuid,,}"
uuid_clean=${uuid_lower//-/}

filename="$uuid_clean.$extension"

/home/nick/.local/bin/aws s3 cp "$1" s3://i.nick.sg/$filename >> /dev/null &&
  url="http://i.nick.sg/$filename" &&
  echo -n $url | xclip -in -selection clipboard &&
  echo $url
