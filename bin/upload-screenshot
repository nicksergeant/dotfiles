#!/usr/local/bin/bash

file=$1
extension="${file##*.}"

uuid=$(uuidgen)
uuid_lower="${uuid,,}"
uuid_clean=${uuid_lower//-/}

filename="$uuid_clean.$extension"

/usr/local/bin/aws s3 cp "$1" s3://nick.sg/s/$filename >> /dev/null &&
  url="http://nick.sg/s/$filename" &&
  echo -n $url | pbcopy &&
  echo $url &&
  open $url &&
  afplay /System/Library/Sounds/Glass.aiff
